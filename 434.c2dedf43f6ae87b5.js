"use strict";(self.webpackChunkegret_angular_latest_test=self.webpackChunkegret_angular_latest_test||[]).push([[434],{7434:(ie,x,s)=>{s.r(x),s.d(x,{AuthModule:()=>ee});var d=s(35420),C=s(96814),a=s(56223),A=s(71365),P=s(33499),U=s(68153),k=s(13519),p=s.n(k),y=s(70741),e=s(65879),w=s(69862);let S=(()=>{class r{constructor(t){this.http=t,this.AUTH_URL=y.N.CuriamAuthURL}login(t){const i={headers:new w.WM({"X-Frame-Options":"SAMEORIGIN","Content-Security-Policy":"frame-src 'self'; frame-ancestors 'self'; object-src 'none';","Content-Security-Policy-Report-Only":"frame-src 'self'; frame-ancestors 'self'; object-src 'none';","X-Content-Type-Options":"nosniff","X-Robots-Tag":"none","X-XSS-Protection":"1; mode=block","Strict-Transport-Security":"max-age=31536000; includeSubDomains"})};return this.http.post(this.AUTH_URL+"/signin",t,i)}register(t){const i={headers:new w.WM({"X-Frame-Options":"SAMEORIGIN","Content-Security-Policy":"frame-src 'self'; frame-ancestors 'self'; object-src 'none';","Content-Security-Policy-Report-Only":"frame-src 'self'; frame-ancestors 'self'; object-src 'none';","X-Content-Type-Options":"nosniff","X-Robots-Tag":"none","X-XSS-Protection":"1; mode=block","Strict-Transport-Security":"max-age=31536000; includeSubDomains"})};return this.http.post(this.AUTH_URL+"/register",t,i)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(w.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var _=s(6593),T=s(75986),f=s(32296),b=s(24516),u=s(64170),E=s(26385),Z=s(30617),I=s(66278);const z=["captchaWrapperElem"];let g=(()=>{class r{constructor(t){this.zone=t,this.scriptElemId="ngx-catpcha-script",this.windowGrecaptcha="grecaptcha",this.windowGrecaptchaEnterprise="enterprise",this.windowOnLoadCallbackProperty="ngx_captcha_onload_callback",this.windowOnLoadEnterpriseCallbackProperty="ngx_captcha_onload_enterprise_callback",this.globalDomain="recaptcha.net",this.defaultDomain="google.com",this.enterpriseApi="enterprise.js",this.defaultApi="api.js"}registerCaptchaScript(t,i,n,l){if(this.grecaptchaScriptLoaded(t.useEnterprise))return void this.zone.run(t.useEnterprise?()=>{n(window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise])}:()=>{n(window[this.windowGrecaptcha])});t.useEnterprise?window[this.getCallbackName(!0)]=()=>this.zone.run(n.bind(this,window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise])):window[this.getCallbackName(!1)]=()=>this.zone.run(n.bind(this,window[this.windowGrecaptcha]));const c=document.createElement("script");c.id=this.scriptElemId,c.innerHTML="",c.src=this.getCaptchaScriptUrl(t,i,l),c.async=!0,c.defer=!0,document.getElementsByTagName("head")[0].appendChild(c)}cleanup(){const t=document.getElementById(this.scriptElemId);t&&t.remove(),window[this.getCallbackName()]=void 0,window[this.windowGrecaptcha]=void 0}grecaptchaScriptLoaded(t){return!!(window[this.getCallbackName(t)]&&window[this.windowGrecaptcha]&&(t&&window[this.windowGrecaptcha][this.windowGrecaptchaEnterprise]||window[this.windowGrecaptcha].execute))}getCallbackName(t){return t?this.windowOnLoadEnterpriseCallbackProperty:this.windowOnLoadCallbackProperty}getLanguageParam(t){return t?`&hl=${t}`:""}getCaptchaScriptUrl(t,i,n){return`https://www.${t.useGlobalDomain?this.globalDomain:this.defaultDomain}/recaptcha/${t.useEnterprise?this.enterpriseApi:this.defaultApi}?onload=${this.getCallbackName(t.useEnterprise)}&render=${i}${this.getLanguageParam(n)}`}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.R0b))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),R=(()=>{class r{constructor(t,i,n,l){this.renderer=t,this.zone=i,this.injector=n,this.scriptService=l,this.captchaElemPrefix="ngx_captcha_id_",this.setupCaptcha=!0,this.useGlobalDomain=!1,this.useEnterprise=!1,this.type="image",this.tabIndex=0,this.success=new e.vpe,this.load=new e.vpe,this.reset=new e.vpe,this.ready=new e.vpe,this.error=new e.vpe,this.expire=new e.vpe,this.setupAfterLoad=!1,this.resetCaptchaAfterSuccess=!1,this.onChange=c=>{},this.onTouched=c=>{},this.isLoaded=!1}ngAfterViewInit(){this.control=this.injector.get(a.a5,void 0,e.XFs.Optional)?.control}ngAfterViewChecked(){this.setupCaptcha&&(this.setupCaptcha=!1,this.setupComponent())}ngOnChanges(t){t&&t.hl&&!t.hl.firstChange&&t.hl.currentValue!==t.hl.previousValue&&this.scriptService.cleanup(),t&&t.useGlobalDomain&&!t.useGlobalDomain.firstChange&&t.useGlobalDomain.currentValue!==t.useGlobalDomain.previousValue&&this.scriptService.cleanup(),this.setupCaptcha=!0}getResponse(){return this.reCaptchaApi.getResponse(this.captchaId)}getCaptchaId(){return this.captchaId}resetCaptcha(){this.zone.run(()=>{this.reCaptchaApi.reset(),this.onChange(void 0),this.onTouched(void 0),this.reset.next()})}getCurrentResponse(){return this.currentResponse}reloadCaptcha(){this.setupComponent()}ensureCaptchaElem(t){const i=document.getElementById(t);if(!i)throw Error(`Captcha element with id '${t}' was not found`);this.captchaElem=i}renderReCaptcha(){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.captchaId=this.reCaptchaApi.render(this.captchaElemId,this.getCaptchaProperties()),this.ready.next()},0)})}handleCallback(t){this.currentResponse=t,this.success.next(t),this.zone.run(()=>{this.onChange(t),this.onTouched(t)}),this.resetCaptchaAfterSuccess&&this.resetCaptcha()}getPseudoUniqueNumber(){return(new Date).getUTCMilliseconds()+Math.floor(9999*Math.random())}setupComponent(){this.captchaSpecificSetup(),this.createAndSetCaptchaElem(),this.scriptService.registerCaptchaScript({useGlobalDomain:this.useGlobalDomain,useEnterprise:this.useEnterprise},"explicit",t=>{this.onloadCallback(t)},this.hl)}onloadCallback(t){if(this.reCaptchaApi=t,!this.reCaptchaApi)throw Error("ReCaptcha Api was not initialized correctly");this.isLoaded=!0,this.load.next(),this.renderReCaptcha(),this.setupAfterLoad&&(this.setupAfterLoad=!1,this.setupComponent())}generateNewElemId(){return this.captchaElemPrefix+this.getPseudoUniqueNumber()}createAndSetCaptchaElem(){if(this.captchaElemId=this.generateNewElemId(),!this.captchaElemId)throw Error("Captcha elem Id is not set");if(!this.captchaWrapperElem)throw Error("Captcha DOM element is not initialized");this.captchaWrapperElem.nativeElement.innerHTML="";const t=this.renderer.createElement("div");t.id=this.captchaElemId,this.renderer.appendChild(this.captchaWrapperElem.nativeElement,t),setTimeout(()=>{this.captchaElemId&&this.ensureCaptchaElem(this.captchaElemId)},0)}writeValue(t){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}handleErrorCallback(){this.zone.run(()=>{this.onChange(void 0),this.onTouched(void 0)}),this.error.next()}handleExpireCallback(){this.expire.next(),this.resetCaptcha()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(e.zs3),e.Y36(g))},r.\u0275dir=e.lG2({type:r,inputs:{siteKey:"siteKey",useGlobalDomain:"useGlobalDomain",useEnterprise:"useEnterprise",type:"type",hl:"hl",tabIndex:"tabIndex"},outputs:{success:"success",load:"load",reset:"reset",ready:"ready",error:"error",expire:"expire"},features:[e.TTD]}),r})();var h=(()=>((h=h||{})[h.InvisibleReCaptcha=0]="InvisibleReCaptcha",h[h.ReCaptcha2=1]="ReCaptcha2",h))();let N=(()=>{class r extends R{constructor(t,i,n,l){super(t,i,n,l),this.renderer=t,this.zone=i,this.injector=n,this.scriptService=l,this.windowOnErrorCallbackProperty="ngx_captcha_error_callback",this.windowOnExpireCallbackProperty="ngx_captcha_expire_callback",this.theme="light",this.size="normal",this.recaptchaType=h.ReCaptcha2}ngOnChanges(t){super.ngOnChanges(t)}ngOnDestroy(){window[this.windowOnErrorCallbackProperty]={},window[this.windowOnExpireCallbackProperty]={}}captchaSpecificSetup(){this.registerCallbacks()}getCaptchaProperties(){return{sitekey:this.siteKey,callback:t=>this.zone.run(()=>this.handleCallback(t)),"expired-callback":()=>this.zone.run(()=>this.handleExpireCallback()),"error-callback":()=>this.zone.run(()=>this.handleErrorCallback()),theme:this.theme,type:this.type,size:this.size,tabindex:this.tabIndex}}registerCallbacks(){window[this.windowOnErrorCallbackProperty]=super.handleErrorCallback.bind(this),window[this.windowOnExpireCallbackProperty]=super.handleExpireCallback.bind(this)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(e.zs3),e.Y36(g))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ngx-recaptcha2"]],viewQuery:function(t,i){if(1&t&&e.Gf(z,5),2&t){let n;e.iGM(n=e.CRH())&&(i.captchaWrapperElem=n.first)}},inputs:{theme:"theme",size:"size"},features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>r),multi:!0}]),e.qOj,e.TTD],decls:2,vars:0,consts:[["captchaWrapperElem",""]],template:function(t,i){1&t&&e._UZ(0,"div",null,0)},encapsulation:2}),r})(),O=(()=>{class r{constructor(t,i){this.scriptService=t,this.zone=i}execute(t,i,n,l,c){this.executeAsPromise(t,i,l).then(n).catch(m=>c?c(m):console.error(m))}executeAsPromise(t,i,n){return new Promise((l,c)=>{this.scriptService.registerCaptchaScript(n||{},t,re=>{this.zone.runOutsideAngular(()=>{try{re.execute(t,{action:i}).then(v=>this.zone.run(()=>l(v)))}catch(v){c(v)}})})})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g),e.LFG(e.R0b))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[g,O],imports:[C.ez]}),r})();function D(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," le Prenom est "),e.TgZ(2,"strong"),e._uU(3,"requis."),e.qZA()())}function F(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," le Nom est "),e.TgZ(2,"strong"),e._uU(3,"requis."),e.qZA()())}function M(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," le Pseudo est "),e.TgZ(2,"strong"),e._uU(3,"requis."),e.qZA()())}function j(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," L'email est invalide "),e.qZA())}function G(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," l'Email est "),e.TgZ(2,"strong"),e._uU(3,"requis."),e.qZA()())}function J(r,o){1&r&&(e.ynx(0),e._uU(1," Le mot de passe doit contenir une lettre majuscule,un chiffre et un caract\xe8re sp\xe9cial (!@#$%^&*). "),e.BQk())}function Q(r,o){1&r&&(e.ynx(0),e._uU(1," Le mot de passe est requis "),e.BQk())}function L(r,o){1&r&&(e.ynx(0),e._uU(1," Le mot de passe doit comporter au moins 8 caract\xe8res. "),e.BQk())}function Y(r,o){if(1&r&&(e.TgZ(0,"mat-error",31),e.YNc(1,J,2,0,"ng-container",16),e.YNc(2,Q,2,0,"ng-container",16),e.YNc(3,L,2,0,"ng-container",16),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.passwordControl.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",t.passwordControl.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.passwordControl.hasError("minlength"))}}function V(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Confirmer le mot de passe est obligatoire. "),e.qZA())}function B(r,o){1&r&&(e.TgZ(0,"mat-error",32),e._uU(1," Les mots de passe ne correspondent pas. "),e.qZA())}const K=function(){return{}};let H=(()=>{class r{constructor(t,i,n){this.fb=t,this.authService=i,this.titleService=n,this.showPassword=!1,this.showConfirmPassword=!1,this.passwordsDoNotMatch=!1,this.capchaKey=y.N.capchaKey}ngOnInit(){this.titleService.setTitle("Curiam | Inscription"),this.signupForm=this.fb.group({firstname:["",a.kI.required],lastname:["",a.kI.required],username:["",a.kI.required],email:["",[a.kI.required,a.kI.email]],password:["",[a.kI.required,a.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.*[a-zA-Z]).{8,}$/),a.kI.minLength(8)]],confirmPassword:["",a.kI.required],agreed:[!1,a.kI.requiredTrue],recaptcha:["",[a.kI.required,this.recaptchaValidator()]]}),this.firstnameControl=this.signupForm.get("firstname"),this.lastnameControl=this.signupForm.get("lastname"),this.usernameControl=this.signupForm.get("username"),this.passwordControl=this.signupForm.get("password"),this.emailControl=this.signupForm.get("email"),this.signupForm.setValidators(this.passwordsMatch.bind(this)),this.confirmPasswordControl=this.signupForm.get("confirmPassword")}onSubmit(){this.signupForm.invalid||this.authService.register(this.signupForm.value).subscribe(t=>{t&&"User Created Successfully"===t.message?(console.log("Registration success:",t.message),p().fire({title:"Compte cr\xe9\xe9 avec succ\xe8s!",text:"Veuillez v\xe9rifier votre e-mail pour continuer.",icon:"success",confirmButtonText:"D'accord"})):(console.log("API Error:",t.error),"A user with the same Username already exists"===t.error&&p().fire({title:"Erreur!",text:"Ce nom d'utilisateur existe d\xe9j\xe0. Veuillez en choisir un autre.",icon:"error",confirmButtonText:"OK"}),"A user with the same Email  already exists"===t.error&&p().fire({title:"Erreur!",text:"Cette adresse e-mail existe d\xe9j\xe0. Veuillez en utiliser une autre.",icon:"error",confirmButtonText:"OK"}))},t=>{console.log("HTTP Error:",t),p().fire({title:"Erreur!",text:"Une erreur impr\xe9vue s'est produite. Veuillez r\xe9essayer ult\xe9rieurement.",icon:"error",confirmButtonText:"OK"})})}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}passwordsMatch(t){return t.get("password").value!==t.get("confirmPassword").value?{passwordMismatch:!0}:null}redirecttovitrine(){window.location.href="http://localhost:4200"}recaptchaValidator(){return t=>{const i=t.value;return i&&i.length>0?null:{recaptchaInvalid:!0}}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.QS),e.Y36(S),e.Y36(_.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-signup"]],decls:68,vars:22,consts:[[1,"seciton-left"],[1,"section-left-content"],["id","account",1,"text-36","font-light"],["id","account",1,"mb-6","text-small"],["mat-flat-button","","color","accent",3,"routerLink"],[1,"form-holder","h-screen","mat-elevation-z4","mat-bg-card",3,"perfectScrollbar"],[1,"signup-form","flex","flex-col","justify-start",3,"formGroup","ngSubmit"],[1,"form-headline","text-center","mb-4"],[1,"font-bold"],[1,"text-muted"],[1,"mb-8","flex","flex-wrap","justify-center","items-center"],["type","button",3,"click"],["width","250px","src","assets/images/Curiam.png","alt",""],[1,"flex","flex-wrap","justify-between","flex-col"],["color","accent",1,"w-full"],["matInput","","formControlName","firstname","matInput","","type","text","name","first_name","placeholder","Prenom"],[4,"ngIf"],["formControlName","lastname","matInput","","type","text","name","Last_name","placeholder","Nom"],["color","accent",1,"full-width"],["matInput","","formControlName","username","type","text","name","username","placeholder","Pseudo"],["matInput","","formControlName","email","type","email","name","email","placeholder","exemple@courriel.com"],["matInput","","formControlName","password","name","Mot de passe","placeholder","********",3,"type"],["style","margin-bottom: 50px;",4,"ngIf"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"full-width"],["matInput","","formControlName","confirmPassword","name","Confirmer le mot de passe","placeholder","********",3,"type"],["style","\n          color: #f80909; \n          font-size: 12px;\n          margin-left: 16px; \n         ",4,"ngIf"],["formControlName","agreed",1,"mb-6"],["formControlName","recaptcha","required","true",1,"captcha-container",3,"siteKey"],["captchaElem",""],["mat-raised-button","","color","accent",1,"!mb-4",3,"disabled"],[2,"margin-bottom","50px"],[2,"color","#f80909","font-size","12px","margin-left","16px"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Bienvenue sur notre plateforme"),e.qZA(),e.TgZ(4,"p",3),e._uU(5,"D\xe9j\xe0 un compte ? "),e._UZ(6,"br"),e._uU(7,"Connectez-vous et commencez!"),e.qZA(),e.TgZ(8,"button",4),e._uU(9,"Se Connecter"),e.qZA()()(),e.TgZ(10,"div",5)(11,"form",6),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(12,"div",7)(13,"h2",8),e._uU(14,"Commencez ici!"),e.qZA(),e.TgZ(15,"p",9),e._uU(16,"Profitez d'un essai de 30 jours sans aucune contrainte "),e._UZ(17,"br"),e._uU(18," d\xe9couvrez les fonctionnalit\xe9s de notre application"),e.qZA()(),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return i.redirecttovitrine()}),e._UZ(21,"img",12),e.qZA()(),e.TgZ(22,"div",13)(23,"mat-form-field",14)(24,"mat-label"),e._uU(25,"Prenom"),e.qZA(),e._UZ(26,"input",15),e.YNc(27,D,4,0,"mat-error",16),e.qZA(),e.TgZ(28,"mat-form-field",14)(29,"mat-label"),e._uU(30,"Nom"),e.qZA(),e._UZ(31,"input",17),e.YNc(32,F,4,0,"mat-error",16),e.qZA()(),e.TgZ(33,"mat-form-field",18)(34,"mat-label"),e._uU(35,"Pseudo"),e.qZA(),e._UZ(36,"input",19),e.YNc(37,M,4,0,"mat-error",16),e.qZA(),e.TgZ(38,"mat-form-field",18)(39,"mat-label"),e._uU(40,"Courriel"),e.qZA(),e._UZ(41,"input",20),e.YNc(42,j,2,0,"mat-error",16),e.YNc(43,G,4,0,"mat-error",16),e.qZA(),e.TgZ(44,"mat-form-field",18)(45,"mat-label"),e._uU(46,"Mot de passe"),e.qZA(),e._UZ(47,"input",21),e.YNc(48,Y,4,3,"mat-error",22),e.TgZ(49,"button",23),e.NdJ("click",function(){return i.togglePasswordVisibility()}),e.TgZ(50,"mat-icon"),e._uU(51),e.qZA()()(),e.TgZ(52,"mat-form-field",24)(53,"mat-label"),e._uU(54,"Confirmer le mot de passe"),e.qZA(),e._UZ(55,"input",25),e.TgZ(56,"button",23),e.NdJ("click",function(){return i.toggleConfirmPasswordVisibility()}),e.TgZ(57,"mat-icon"),e._uU(58),e.qZA()(),e.YNc(59,V,2,0,"mat-error",16),e.qZA(),e.YNc(60,B,2,0,"mat-error",26),e.TgZ(61,"mat-checkbox",27),e._uU(62,"j'accepte les termes et conditions et la politique de confidentialit\xe9"),e.qZA(),e._UZ(63,"ngx-recaptcha2",28,29),e.TgZ(65,"button",30),e._uU(66,"S'inscrire"),e.qZA(),e._UZ(67,"mat-divider"),e.qZA()()),2&t&&(e.xp6(8),e.Q6J("routerLink","/auth/login"),e.xp6(2),e.Q6J("perfectScrollbar",e.DdM(21,K)),e.xp6(1),e.Q6J("formGroup",i.signupForm),e.xp6(16),e.Q6J("ngIf",i.firstnameControl.hasError("required")),e.xp6(5),e.Q6J("ngIf",i.lastnameControl.hasError("required")),e.xp6(5),e.Q6J("ngIf",i.usernameControl.hasError("required")),e.xp6(5),e.Q6J("ngIf",i.emailControl.hasError("email")&&!i.emailControl.hasError("required")),e.xp6(1),e.Q6J("ngIf",i.emailControl.hasError("required")),e.xp6(4),e.Q6J("type",i.showPassword?"text":"password"),e.xp6(1),e.Q6J("ngIf",i.passwordControl.invalid&&(i.passwordControl.dirty||i.passwordControl.touched)),e.xp6(1),e.uIk("aria-label",i.showPassword?"Hide password":"Show password")("title",i.showPassword?"Hide password":"Show password"),e.xp6(2),e.hij(" ",i.showPassword?"visibility_off":"visibility"," "),e.xp6(4),e.Q6J("type",i.showConfirmPassword?"text":"password"),e.xp6(1),e.uIk("aria-label",i.showConfirmPassword?"Hide password":"Show password")("title",i.showConfirmPassword?"Hide password":"Show password"),e.xp6(2),e.hij(" ",i.showConfirmPassword?"visibility_off":"visibility"," "),e.xp6(1),e.Q6J("ngIf",i.confirmPasswordControl.hasError("required")&&(i.confirmPasswordControl.dirty||i.confirmPasswordControl.touched)),e.xp6(1),e.Q6J("ngIf",i.signupForm.hasError("passwordMismatch")&&(i.signupForm.dirty||i.signupForm.touched)),e.xp6(3),e.Q6J("siteKey",i.capchaKey),e.xp6(2),e.Q6J("disabled",i.signupForm.invalid))},dependencies:[C.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,T.oG,f.lW,f.RK,b.Nt,u.KE,u.hX,u.TO,u.R9,E.d,Z.Hw,I.$,d.rH,N],styles:[".custom-error-message[_ngcontent-%COMP%]{color:#f80909;font-size:12px;margin-top:-20px;margin-left:20px}.captcha-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:10px;margin-bottom:30px}.error-message[_ngcontent-%COMP%]{white-space:normal}"]}),r})();var X=s(28136);const W=function(){return{}},$=[{path:"register",component:H},{path:"login",component:(()=>{class r{constructor(t,i,n,l,c){this.authService=t,this.fb=i,this.loader=n,this.titleService=l,this.router=c,this.showPassword=!1,this.loadertitle="Chargement en cours...",this.loadertime=3e3}ngOnInit(){this.titleService.setTitle("Curiam | Se Connecter");const t=new a.p4("",a.kI.required);this.signupForm=this.fb.group({usernameoremail:["",[a.kI.required]],password:t,agreed:[!1,a.kI.requiredTrue]})}onSubmit(){console.log(this.signupForm.value),this.signupForm.invalid||this.authService.login(this.signupForm.value).subscribe(t=>{console.log(t),t.hasOwnProperty("message")&&"Authentication successful"===t.message?(console.log("Authentication successful"),console.log("Token data:",t.data),console.log("Access token:",t.data.access_token),this.loader.open(this.loadertitle),setTimeout(()=>{this.router.navigate(["acceuil/Acceuil"]),this.loader.close()},this.loadertime)):t.hasOwnProperty("error")?("Username or email doesn't exist"===t.error?(this.loader.open(this.loadertitle),setTimeout(()=>{p().fire({title:"Erreur!",text:"Ce nom d'utilisateur ou Courriel n'existe pas.",icon:"error",confirmButtonText:"OK"}),this.loader.close()},this.loadertime)):"Please verify email before continuing"===t.error?(this.loader.open(this.loadertitle),setTimeout(()=>{p().fire({title:"Erreur!",text:"Veuillez verifier votre email pour se connecter.",icon:"error",confirmButtonText:"OK"}),this.loader.close()},this.loadertime)):"User is disabled"===t.error?(this.loader.open(this.loadertitle),setTimeout(()=>{p().fire({title:"Erreur!",text:"ld'utilisateur est d\xe9sactiv\xe9. Veuillez contactez contact@Curiam.com",icon:"error",confirmButtonText:"OK"}),this.loader.close()},this.loadertime)):"Invalid password"===t.error&&(this.loader.open(this.loadertitle),setTimeout(()=>{p().fire({title:"Erreur!",text:"Mot de passe Erron\xe9",icon:"error",confirmButtonText:"OK"}),this.loader.close()},this.loadertime)),console.log("Authentication error:",t.error)):(console.log("Unexpected response format:",t),p().fire({title:"Erreur!",text:"Erreur Serveur",icon:"error",confirmButtonText:"OK"}))},t=>{console.log("HTTP Error:",t)})}togglePasswordVisibility(){this.showPassword=!this.showPassword}redirecttovitrine(){window.location.href="http://localhost:4200"}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(S),e.Y36(a.QS),e.Y36(X.P),e.Y36(_.Dx),e.Y36(d.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-signin"]],decls:34,vars:9,consts:[[1,"seciton-left"],[1,"section-left-content"],[1,"text-36","font-light"],[1,"mb-6","text-small"],["mat-flat-button","","color","accent",3,"routerLink"],[1,"form-holder","h-screen","mat-bg-card","mat-elevation-z4",3,"perfectScrollbar"],[1,"signup-form","flex","flex-col",3,"formGroup","ngSubmit"],[1,"form-headline","text-center","mb-8"],[1,"font-bold"],[1,"mb-8","flex","flex-wrap","justify-center","items-center"],["type","button",3,"click"],["width","200px","src","assets/images/Curiam.png","alt",""],[1,"full-width"],["matInput","","formControlName","usernameoremail","name","usernameoremail","placeholder","Pseudo ou courriel"],["matInput","","formControlName","password","type","password","name","password","placeholder","********",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["formControlName","agreed",1,"mb-6"],["mat-raised-button","","color","accent",1,"!mb-4",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Vous n'avez pas encore de compte?"),e.qZA(),e.TgZ(4,"p",3),e._uU(5,"Profitez d'un essai de 30 jours sans aucune contrainte "),e._UZ(6,"br"),e._uU(7," d\xe9couvrez les fonctionnalit\xe9s de notre application"),e.qZA(),e.TgZ(8,"button",4),e._uU(9,"S'inscrire"),e.qZA()()(),e.TgZ(10,"div",5)(11,"form",6),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(12,"div",7)(13,"h2",8),e._uU(14,"Connecter \xe0 votre compte"),e.qZA()(),e.TgZ(15,"div",9)(16,"button",10),e.NdJ("click",function(){return i.redirecttovitrine()}),e._UZ(17,"img",11),e.qZA()(),e.TgZ(18,"mat-form-field",12)(19,"mat-label"),e._uU(20,"Email ou pseudo"),e.qZA(),e._UZ(21,"input",13),e.qZA(),e.TgZ(22,"mat-form-field",12)(23,"mat-label"),e._uU(24,"Mot de passe"),e.qZA(),e._UZ(25,"input",14),e.TgZ(26,"button",15),e.NdJ("click",function(){return i.togglePasswordVisibility()}),e.TgZ(27,"mat-icon"),e._uU(28),e.qZA()()(),e.TgZ(29,"mat-checkbox",16),e._uU(30,"j'accepte les termes et conditions et la politique de confidentialit\xe9"),e.qZA(),e.TgZ(31,"button",17),e._uU(32,"Se connecter"),e.qZA(),e._UZ(33,"mat-divider"),e.qZA()()),2&t&&(e.xp6(8),e.Q6J("routerLink","/auth/register"),e.xp6(2),e.Q6J("perfectScrollbar",e.DdM(8,W)),e.xp6(1),e.Q6J("formGroup",i.signupForm),e.xp6(14),e.Q6J("type",i.showPassword?"text":"password"),e.xp6(1),e.uIk("aria-label",i.showPassword?"Hide password":"Show password")("title",i.showPassword?"Hide password":"Show password"),e.xp6(2),e.hij(" ",i.showPassword?"visibility_off":"visibility"," "),e.xp6(3),e.Q6J("disabled",i.signupForm.invalid))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,T.oG,f.lW,f.RK,b.Nt,u.KE,u.hX,u.R9,E.d,Z.Hw,I.$,d.rH]}),r})()}];let ee=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[C.ez,a.u5,A.aw,a.UX,P.m,U.Xd,d.Bz.forChild($),u.lN,b.c,q,d.Bz]}),r})()}}]);